<!DOCTYPE html>
<html lang="ht">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <meta name="theme-color" content="#000000" />
  <title>Adam_D'H7</title>
  <link rel="manifest" href="manifest.json" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Adam_D'H7" />
  <link rel="apple-touch-icon" href="https://res.cloudinary.com/dckwrqrur/image/upload/v1757205404/tf-stream-url/Screenshot_20250906_202106_Chrome_go9vhu.png" />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    :root{
      --card-max-width:920px;
      --card-min-height:80px;
      --card-max-height:80vh;
      --mini-w:100px;
      --mini-h:70px;
      --bg:#000;
      --muted:#9aa0a6;
      --accent:#fff;
      --seek-height:8px;
      --box-bg: rgba(255,255,255,0.02);
      --box-border: rgba(255,255,255,0.03);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:var(--bg);color:var(--accent);font-family:Roboto,system-ui,Inter,Arial,sans-serif}
    body{padding-bottom:60px}
    .header{ padding:18px 16px; text-align:center; position:sticky; top:0; backdrop-filter: blur(10px); background: rgba(0,0,0,0.7); z-index:10; }
    .logo{ font-size:26px; font-weight:700; background:linear-gradient(90deg,#fff,#000); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
    .search-container{ display:flex; justify-content:center; padding:8px 20px; }
    .search-box{ width:100%; max-width:500px; background:#1c1c1e; border:none; padding:10px 14px; border-radius:12px; color:#fff; font-size:15px; outline:none; }

    #explorerView{ padding:18px; max-height:calc(100vh - 120px); overflow-y:auto; background:#000; -webkit-overflow-scrolling:touch; }

    .post-card{ background:#111; border-radius:14px; padding:14px; margin-bottom:18px; box-shadow:0 2px 8px rgba(0,0,0,0.7); }
    .post-name{ font-weight:700; font-size:16px; margin:8px 0; color:#fff; text-align:left; }
    .post-text{ font-size:14px; color:#ddd; margin-bottom:10px; white-space:pre-wrap; text-align:left; }
    .post-desc{ font-size:13px; color:#ccc; margin-top:8px; text-align:left; }

    .media-wrap{ text-align:center; margin: 0 0 10px 0; }

    .post-thumb-container {
      position:relative;
      display:inline-block;
      box-sizing:border-box;
      max-width:var(--card-max-width);
      width:auto;
      background:#000;
      border-radius:12px;
      overflow:hidden;
      padding:0;
      box-shadow: inset 0 0 18px rgba(0,0,0,0.45), 0 6px 18px rgba(0,0,0,0.6);
      min-height:var(--card-min-height);
      max-height:var(--card-max-height);
    }

    .post-card.playing {
      padding:0;
      background:transparent;
      box-shadow:none;
      border-radius:0;
      margin:0 0 18px 0;
    }
    .post-card.playing > :not(.media-wrap) { display:none; }
    .post-card.playing .media-wrap { margin:0; }

    .social-section{ margin-top:10px; padding-top:10px; border-top:1px solid #333; display:flex; justify-content:center; gap:18px; flex-wrap:wrap; }
    .social-section a{ color:#fff; text-decoration:none; display:inline-flex; align-items:center; justify-content:center; width:44px; height:44px; border-radius:10px; background:rgba(255,255,255,0.03); }
    .social-section i{ font-size:18px; }

    @media (max-width:600px) {
      :root { --mini-w:86px; --mini-h:62px; }
    }

    #sw-update-banner{ position:fixed; left:12px; right:12px; bottom:12px; background:#111; color:#fff; padding:10px 14px; border-radius:8px; box-shadow:0 6px 18px rgba(0,0,0,.4); font-family:sans-serif; text-align:center; z-index:99999; display:flex; align-items:center; justify-content:center; gap:12px; }
    #sw-update-banner button{ background:#1a73e8; color:#fff; border:0; padding:8px 12px; border-radius:6px; cursor:pointer; }

    #explorerView {-ms-overflow-style: none; scrollbar-width: none; touch-action: pan-y;}
    #explorerView::-webkit-scrollbar { display: none; width: 0; height: 0; }

    .wrap{max-width:1100px;margin:28px auto;padding:12px;width:95%}
    .video-card{position:relative;border-radius:12px;overflow:hidden;background:#000;aspect-ratio:16/9;max-height:68vh;min-height:180px;touch-action:none}
    video{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;z-index:1;background:#000;transition:filter .08s linear}
    video.contain{ object-fit:contain; background:#000; }

    .controls-wrap{position:absolute;left:12px;right:12px;bottom:12px;pointer-events:none;z-index:12;transition:opacity .18s ease}
    .time-row{display:flex;align-items:center;gap:12px;padding:8px 12px;color:var(--muted);font-size:14px;justify-content:center}
    .time{width:82px;text-align:center;font-variant-numeric:tabular-nums}
    .progress{flex:1;max-width:820px;display:flex;align-items:center}
    .seek{position:relative;height:var(--seek-height);width:100%;border-radius:999px;cursor:pointer;background:repeating-linear-gradient(90deg, rgba(255,255,255,0.06) 0 2px, rgba(255,255,255,0) 2px 12px);}
    .fill{position:absolute;left:0;top:0;height:100%;width:0%;border-radius:999px;background:linear-gradient(90deg, rgba(255,255,255,0.95), rgba(255,255,255,0.55));}
    .thumb{position:absolute;top:50%;transform:translate(-50%,-50%);width:18px;height:18px;border-radius:50%;background:#0b0b0b;border:2px solid var(--accent);box-shadow:none;pointer-events:auto;touch-action:none}

    .controls-hidden{opacity:0;pointer-events:none}
    .controls-visible{opacity:1;pointer-events:auto}

    .inside-mini-controls{
    position:absolute;
    left:12px;
    right:12px;
    bottom:92px;
    z-index:13;
    display:flex;
    justify-content:center;
    gap:14px;
    pointer-events:auto;
    transition:bottom .18s ease, opacity .18s ease;
    }
    .inside-hidden{opacity:0;pointer-events:none}
    .inside-visible{opacity:1;pointer-events:auto}
    .video-card.landscape-mode .inside-mini-controls{ bottom:160px; }

    .inside-item{
    min-width:86px;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:8px;
    border-radius:10px;
    background:var(--box-bg);
    border:1px solid var(--box-border);
    }
    .inside-item .mini-btn{
    width:100%;
    height:44px;
    border-radius:8px;
    border:none;
    background:transparent;
    color:var(--accent);
    font-weight:700;
    font-size:15px;
    display:inline-flex;
    align-items:center;
    justify-content:center;
    cursor:pointer;
    -webkit-tap-highlight-color: transparent;
    }
    .inside-item .mini-btn:active{transform:translateY(1px)}
    @media (orientation:landscape) { .inside-item{min-width:110px;padding:10px} }

    .landscape-btn{margin-left:8px;border:none;background:transparent;color:var(--muted);font-size:18px;cursor:pointer}
    .landscape-btn:hover{color:var(--accent)}

    .menu-dots{margin-left:6px;border:none;background:transparent;color:var(--muted);font-size:18px;cursor:pointer;display:none;padding:6px;border-radius:8px}
    .video-card.landscape-mode .menu-dots{ display:inline-block; }
    @media (orientation:landscape) { .menu-dots { display:inline-block; } }
    .menu-dots:hover{color:var(--accent);background:rgba(255,255,255,0.02)}

    .swipe-indicator{
    position:absolute;
    left:50%;
    top:50%;
    transform:translate(-50%,-50%);
    min-width:140px;
    padding:10px 14px;
    border-radius:10px;
    background:rgba(0,0,0,0.75);
    color:var(--accent);
    display:flex;
    align-items:center;
    gap:10px;
    justify-content:center;
    z-index:20;
    pointer-events:none;
    opacity:0;
    transition:opacity .12s ease;
    font-weight:700;
    font-size:15px;
    }
    .swipe-indicator.show{opacity:1}
    .swipe-icon{width:22px;height:22px;flex:0 0 22px}
    .swipe-value{min-width:48px;text-align:right;font-variant-numeric:tabular-nums}

    .error{position:absolute;left:12px;right:12px;top:50%;transform:translateY(-50%);background:rgba(0,0,0,0.6);padding:16px;border-radius:10px;color:#ff9b9b;display:none;text-align:center;z-index:20}

    .menu-overlay, .lang-overlay {
    position:fixed;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:99999;
    pointer-events:auto;
    opacity:0;
    visibility:hidden;
    transition:opacity .14s ease, visibility .14s;
    }
    .menu-overlay.show, .lang-overlay.show { opacity:1; visibility:visible; }
    .menu-backdrop, .lang-backdrop { position:absolute; inset:0; z-index:99990; background:rgba(0,0,0,0.5); }
    .menu-sheet, .lang-sheet {
    position:relative;
    z-index:99999;
    min-width:280px;
    max-width:92%;
    border-radius:12px;
    background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
    border:1px solid rgba(255,255,255,0.04);
    padding:16px;
    color:var(--accent);
    box-shadow: 0 10px 30px rgba(0,0,0,0.6);
    }
    .menu-header{display:flex;align-items:center;gap:12px;margin-bottom:12px}
    .back-btn{background:transparent;border:none;color:var(--muted);font-size:16px;display:flex;align-items:center;gap:8px;cursor:pointer;padding:6px;border-radius:8px}
    .back-btn:hover{color:var(--accent);background:rgba(255,255,255,0.02)}
    .close-btn{margin-left:auto;background:transparent;border:none;color:var(--muted);font-size:18px;cursor:pointer;padding:6px;border-radius:8px}
    .close-btn:hover{color:var(--accent);background:rgba(255,255,255,0.02)}

    .menu-list{display:flex;flex-direction:column;gap:8px}
    .menu-item{padding:12px;border-radius:10px;background:rgba(255,255,255,0.01);cursor:pointer;border:1px solid rgba(255,255,255,0.02);display:flex;align-items:center;justify-content:space-between}
    .menu-item:hover{background:rgba(255,255,255,0.03)}
    .menu-item strong{font-weight:700}

    .lang-list{display:flex;flex-direction:column;gap:8px;margin-top:8px}
    .lang-item{padding:12px;border-radius:10px;background:rgba(255,255,255,0.01);cursor:pointer;border:1px solid rgba(255,255,255,0.02);display:flex;align-items:center;justify-content:space-between}
    .lang-item:hover{background:rgba(255,255,255,0.03)}
    .bold{font-weight:800}

    .wrap, .video-card, .controls-wrap, .inside-mini-controls, .menu-overlay, .lang-overlay { user-select:none; -webkit-user-select:none; -ms-user-select:none; -moz-user-select:none; }
  </style>
</head>
<body>
  <div class="header">
    <div class="logo">Adam_D'H7</div>
    <div class="search-container">
      <input id="searchBox" class="search-box" placeholder="Rechèch..." oninput="filterSearch(this.value)">
    </div>
  </div>

  <div id="explorerView" role="main" aria-live="polite"></div>

  <script>
    const AD_REDIRECT_URL = "https://www.effectivegatecpm.com/sb8frb30?key=b74cd3abdfc6db3be0c0b8d215fcb582";

    let allData = [];
    let currentPlayingContainer = null;

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    async function loadIndexCandidates() {
      const candidates = [
        'index.json',
        './index.json',
        '/index.json',
        'content/index.json',
        './content/index.json'
      ];
      for (const path of candidates) {
        try {
          const res = await fetch(path, { cache: 'no-cache' });
          if (res && res.ok) {
            try {
              const json = await res.json();
              return json;
            } catch (e) {}
          }
        } catch (e) {}
      }
      return null;
    }

    (async function initContentLoader(){
      const ex = document.getElementById("explorerView");
      const files = await loadIndexCandidates();
      if (!files) {
        ex.innerHTML = '<div style="color:#999;padding:20px;text-align:center">Pa jwenn index.json sou sèvè a.</div>';
        return;
      }
      try {
        const jsons = await Promise.all(files.map(f => fetch(f, { cache: 'no-cache' }).then(r => {
          if (!r.ok) return null;
          return r.json().catch(()=>null);
        }).catch(()=>null)));
        const merged = [];
        jsons.forEach(d => { if (Array.isArray(d)) merged.push(...d); else if (d) merged.push(d); });
        if (merged.length === 0) {
          ex.innerHTML = '<div style="color:#999;padding:20px;text-align:center">index.json vid.</div>';
          return;
        }
        allData = merged;
        shuffle(allData);
        displayExplorer(allData);
      } catch (err) {
        ex.innerHTML = '<div style="color:#999;padding:20px;text-align:center">Erè pandan chajman kontni.</div>';
      }
    })();

    function filterSearch(val){
      const txt = (val || "").toLowerCase().trim();
      if (!txt) {
        displayExplorer(allData);
        return;
      }
      const filtered = allData.filter(p =>
        ((p.Catégorie || p.Categorie || p.category || "").toString().toLowerCase() === "poste") &&
        (
          (p.Texte||p.Bio||p.Info||"").toString().toLowerCase().includes(txt) ||
          (p.Name||"").toString().toLowerCase().includes(txt) ||
          (p.Description||p.Desc||"").toString().toLowerCase().includes(txt)
        )
      );
      displayExplorer(filtered);
    }

    function displayExplorer(data){
      const ex = document.getElementById("explorerView");
      ex.innerHTML = "";
      data.forEach((post) => {
        if (((post.Catégorie||post.Categorie||"" )).toString().toLowerCase() !== "poste") return;
        const card = document.createElement("div");
        card.className = "post-card";
        const ptext = document.createElement("div");
        ptext.className = "post-text";
        ptext.textContent = post.Texte || post.Bio || post.Info || "";
        card.appendChild(ptext);
        const title = document.createElement("div");
        title.className = "post-name";
        title.textContent = post.Name || "";
        card.appendChild(title);
        const mediaWrap = document.createElement("div");
        mediaWrap.className = "media-wrap";
        const thumbCon = document.createElement("div");
        thumbCon.className = "post-thumb-container";
        const thumbSrc = post["Url Thumb"] || post.Previously || post.image || post.thumb || "";
        const img = document.createElement("img");
        img.className = "post-thumb";
        img.alt = post.Description || post.Name || "Preview";
        img.loading = "lazy";
        img.src = thumbSrc || "https://via.placeholder.com/800x450?text=Preview";
        thumbCon.appendChild(img);
        mediaWrap.appendChild(thumbCon);
        card.appendChild(mediaWrap);
        const desc = document.createElement("div");
        desc.className = "post-desc";
        desc.textContent = post.Description || post.Desc || post.Texte || "";
        card.appendChild(desc);
        thumbCon.addEventListener("click", (ev) => {
          ev.stopPropagation();
          const src = post["Url Video"] || post.Previously || post.video || post["Url"] || post.image || post.media || "";
          if (!src) return;

          const postCard = thumbCon.closest('.post-card');

          if (currentPlayingContainer && currentPlayingContainer !== thumbCon) {
            const prevPostCard = currentPlayingContainer.closest('.post-card');
            prevPostCard.classList.remove('playing');
            currentPlayingContainer.innerHTML = `<img class="post-thumb" src="${currentPlayingContainer.dataset.originalThumb}" alt="${currentPlayingContainer.dataset.originalAlt}" loading="lazy">`;
          }

          window.open(AD_REDIRECT_URL, '_blank', 'noopener,noreferrer');

          thumbCon.dataset.originalThumb = img.src;
          thumbCon.dataset.originalAlt = img.alt;

          postCard.classList.add('playing');
          currentPlayingContainer = thumbCon;

          playMediaCustom(src, thumbCon);

          thumbCon.scrollIntoView({behavior: 'smooth', block: 'center'});
        });
        ex.appendChild(card);
      });
      displaySocialLinks();
    }

    function looksLikeVideo(src){
      if (!src) return false;
      try {
        const url = src.toString().split('?')[0].toLowerCase();
        if (/\.(mp4|webm|ogg|mov|mkv)$/.test(url)) return true;
        if (src.includes("youtube.com") || src.includes("youtu.be") || src.includes("vimeo.com")) return true;
      } catch(e){}
      return false;
    }

    function normalizeYouTubeEmbed(src){
      try {
        if (src.includes("youtu.be/")) {
          const id = src.split("youtu.be/")[1].split(/[?&]/)[0];
          return "https://www.youtube-nocookie.com/embed/" + id + "?autoplay=1&rel=0&modestbranding=1";
        }
        const u = new URL(src);
        const vParam = u.searchParams.get('v');
        if (vParam) return "https://www.youtube-nocookie.com/embed/" + vParam + "?autoplay=1&rel=0&modestbranding=1";
      } catch(e){}
      return src;
    }

    function normalizeVimeoEmbed(src){
      try {
        const parts = src.split('/');
        const id = parts.pop() || parts.pop();
        return "https://player.vimeo.com/video/" + id + "?autoplay=1";
      } catch(e){}
      return src;
    }

    function playMediaCustom(src, container){
      if(!src) return;

      document.querySelectorAll('.menu-overlay, .lang-overlay').forEach(el => el.remove());

      container.innerHTML = '';

      if(src.includes("youtube.com") || src.includes("youtu.be")) {
        const iframe = document.createElement('iframe');
        iframe.src = normalizeYouTubeEmbed(src);
        iframe.allow = "autoplay; fullscreen; picture-in-picture";
        iframe.style.border = "none";
        iframe.style.width = "100%";
        iframe.style.height = "80vh";
        iframe.style.maxHeight = "80vh";
        container.appendChild(iframe);
        return;
      }
      if(src.includes("vimeo.com")) {
        const iframe = document.createElement('iframe');
        iframe.src = normalizeVimeoEmbed(src);
        iframe.allow = "autoplay; fullscreen; picture-in-picture";
        iframe.style.border = "none";
        iframe.style.width = "100%";
        iframe.style.height = "80vh";
        iframe.style.maxHeight = "80vh";
        container.appendChild(iframe);
        return;
      }
      const isVideo = looksLikeVideo(src);
      if(!isVideo){
        const imgEl = document.createElement('img');
        imgEl.src = src;
        imgEl.loading = 'lazy';
        imgEl.style.display='block';
        imgEl.style.maxWidth='100%';
        imgEl.style.height='auto';
        container.appendChild(imgEl);
        return;
      }

      const wrap = document.createElement('div');
      wrap.className = 'wrap';
      wrap.innerHTML = `
        <div class="video-card" id="card">
          <video id="video" preload="auto" playsinline crossorigin="anonymous"></video>
          <div class="inside-mini-controls inside-visible" id="insideMini">
            <div class="inside-item"><button class="mini-btn" id="insideBack">-10</button></div>
            <div class="inside-item"><button class="mini-btn" id="insidePlay">▶</button></div>
            <div class="inside-item"><button class="mini-btn" id="insideForward">+10</button></div>
          </div>
          <div class="controls-wrap controls-visible" id="controlsWrap">
            <div class="time-row" id="timeRow">
              <div class="time" id="current">0:00</div>
              <div class="progress">
                <div class="seek" id="seekBar" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
                  <div class="fill" id="fill"></div>
                  <div class="thumb" id="thumb" aria-hidden="true"></div>
                </div>
              </div>
              <div class="time" id="duration">0:00</div>
              <button class="landscape-btn" id="landscapeBtn" title="Basculer paysage">⛶</button>
              <button class="menu-dots" id="menuBtn" title="Menu">⋯</button>
            </div>
          </div>
          <div class="swipe-indicator" id="swipeIndicator" aria-hidden="true">
            <div class="swipe-icon" id="swipeIcon"></div>
            <div class="swipe-value" id="swipeValue">0%</div>
          </div>
          <div class="error" id="errorBox">Impossible de lire la vidéo. <span id="errTxt"></span></div>
        </div>
      `;
      container.appendChild(wrap);

      const videoEl = wrap.querySelector('#video');
      videoEl.src = src;

      initPlayerControls(wrap.querySelector('.video-card'));
    }

    function initPlayerControls(card) {
      const video = card.querySelector('#video');
      if (!video) return;

      const playBtn = card.querySelector('#insidePlay');
      const backBtn = card.querySelector('#insideBack');
      const forwardBtn = card.querySelector('#insideForward');
      const seek = card.querySelector('.seek');
      const fill = seek.querySelector('.fill');
      const thumb = seek.querySelector('.thumb');
      const currentTime = card.querySelector('#current');
      const durationTime = card.querySelector('#duration');
      const landscapeBtn = card.querySelector('#landscapeBtn');
      const menuBtn = card.querySelector('#menuBtn');
      const controlsWrap = card.querySelector('#controlsWrap');
      const insideMini = card.querySelector('#insideMini');
      const errorDiv = card.querySelector('.error');

      let controlsTimeout;

      function formatTime(seconds) {
        if (isNaN(seconds)) return '0:00';
        const m = Math.floor(seconds / 60);
        const s = Math.floor(seconds % 60);
        return \`\${m}:\${s.toString().padStart(2, '0')}\`;
      }

      function showControls() {
        controlsWrap.classList.remove('controls-hidden');
        controlsWrap.classList.add('controls-visible');
        insideMini.classList.remove('inside-hidden');
        insideMini.classList.add('inside-visible');
        clearTimeout(controlsTimeout);
        controlsTimeout = setTimeout(hideControls, 4000);
      }

      function hideControls() {
        controlsWrap.classList.add('controls-hidden');
        controlsWrap.classList.remove('controls-visible');
        insideMini.classList.add('inside-hidden');
        insideMini.classList.remove('inside-visible');
      }

      video.addEventListener('loadedmetadata', () => {
        durationTime.textContent = formatTime(video.duration);
      });

      video.addEventListener('timeupdate', () => {
        if (video.duration) {
          const percent = (video.currentTime / video.duration) * 100;
          fill.style.width = \`\${percent}%\`;
          thumb.style.left = \`\${percent}%\`;
          currentTime.textContent = formatTime(video.currentTime);
        }
      });

      video.addEventListener('play', () => {
        playBtn.textContent = '❚❚';
        showControls();
      });

      video.addEventListener('pause', () => {
        playBtn.textContent = '▶';
      });

      video.addEventListener('ended', () => {
        playBtn.textContent = '▶';
      });

      video.addEventListener('error', () => {
        errorDiv.style.display = 'block';
        errorDiv.querySelector('#errTxt').textContent = 'Videyo pa ka jwe.';
      });

      playBtn.addEventListener('click', () => {
        if (video.paused || video.ended) {
          video.play();
        } else {
          video.pause();
        }
      });

      backBtn.addEventListener('click', () => { video.currentTime = Math.max(0, video.currentTime - 10); showControls(); });
      forwardBtn.addEventListener('click', () => { video.currentTime = Math.min(video.duration, video.currentTime + 10); showControls(); });

      function seekTo(e) {
        const rect = seek.getBoundingClientRect();
        const pos = (e.clientX || e.touches[0].clientX) - rect.left;
        const percent = Math.max(0, Math.min(1, pos / rect.width));
        video.currentTime = percent * video.duration;
        showControls();
      }
      seek.addEventListener('click', seekTo);
      seek.addEventListener('touchstart', seekTo);
      seek.addEventListener('touchmove', seekTo);

      landscapeBtn.addEventListener('click', () => {
        if (!document.fullscreenElement) {
          card.requestFullscreen?.() || card.webkitRequestFullscreen?.();
        } else {
          document.exitFullscreen?.() || document.webkitExitFullscreen?.();
        }
        showControls();
      });

      card.addEventListener('click', (e) => {
        if (e.target === card || e.target === video) showControls();
      });

      card.addEventListener('touchstart', (e) => {
        if (e.touches.length === 1) showControls();
      });

      showControls();
      video.play().catch(() => {});
    }

    function displaySocialLinks(){
      const c = document.getElementById("explorerView");
      const s = document.createElement("div");
      s.className = "social-section";
      s.innerHTML = `
        <a href="https://www.facebook.com/profile.php?id=61578852256333" target="_blank" rel="noopener noreferrer" aria-label="Facebook">
          <i class="fab fa-facebook-f" aria-hidden="true"></i>
        </a>
        <a href="mailto:dhaitiadam@gmail.com" rel="noopener noreferrer" aria-label="Mail">
          <i class="fas fa-envelope" aria-hidden="true"></i>
        </a>
        <a href="https://whatsapp.com/channel/0029Vb6WLps7oQhWrUlyPQ2m" target="_blank" rel="noopener noreferrer" aria-label="WhatsApp">
          <i class="fab fa-whatsapp" aria-hidden="true"></i>
        </a>
        <a href="https://www.instagram.com/adam_dhaiti/" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
          <i class="fab fa-instagram" aria-hidden="true"></i>
        </a>
        <a href="https://youtube.com/@adam_dhaiti?si=f_29jvZi6c1mJaBO" target="_blank" rel="noopener noreferrer" aria-label="YouTube">
          <i class="fab fa-youtube" aria-hidden="true"></i>
        </a>
      `;
      if (!document.querySelector('.social-section')) c.appendChild(s);
    }
  </script>

  <script>
    window._swReg = null;
    function showUpdateBanner() {
      if (document.getElementById('sw-update-banner')) return;
      const banner = document.createElement('div');
      banner.id = 'sw-update-banner';
      banner.innerHTML = `
        <div style="flex:1;text-align:left">Nouvo vèsyon disponib.</div>
        <div style="display:flex;gap:8px">
          <button id="sw-update-btn">Mete ajou</button>
          <button id="sw-dismiss-btn" style="background:transparent;border:1px solid #444;color:#fff;padding:8px 10px;border-radius:6px;cursor:pointer">Fèmen</button>
        </div>`;
      document.body.appendChild(banner);
      document.getElementById('sw-update-btn').addEventListener('click', () => {
        if (!window._swReg) return location.reload();
        if (window._swReg.waiting) {
          window._swReg.waiting.postMessage({ type: 'SKIP_WAITING' });
        }
        setTimeout(() => location.reload(), 1500);
      });
      document.getElementById('sw-dismiss-btn').addEventListener('click', () => {
        const el = document.getElementById('sw-update-banner');
        if (el && el.parentNode) el.parentNode.removeChild(el);
      });
    }
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/service-worker.js?v=2')
          .then(reg => {
            window._swReg = reg;
            if (reg.waiting) { showUpdateBanner(); }
            reg.onupdatefound = () => {
              const newSW = reg.installing;
              newSW.addEventListener('statechange', () => {
                if (newSW.state === 'installed') {
                  if (navigator.serviceWorker.controller) { showUpdateBanner(); }
                }
              });
            };
          })
          .catch(err => {});
      });
    }
  </script>

  <script>
    document.addEventListener('gesturestart', function(e) { e.preventDefault(); });
    document.addEventListener('touchmove', function (e) {
      if (e.scale && e.scale !== 1) { e.preventDefault(); }
    }, { passive: false });

    (function() {
      let lastTouch = 0;
      document.addEventListener('touchend', function(e) {
        const now = Date.now();
        if (now - lastTouch <= 300) {
          const tag = (e.target && e.target.tagName) || '';
          if (['INPUT','TEXTAREA','SELECT'].indexOf(tag) === -1) {
            e.preventDefault();
          }
        }
        lastTouch = now;
      }, { passive: false });
    })();
  </script>

  <script>
    (function(){
      const PAYPAL_URL = 'https://www.paypal.com/ncp/payment/MCJHCJ85AC5AJ';
      const logo = document.querySelector('.header .logo');
      if(!logo) return;
      if (!logo.hasAttribute('tabindex')) logo.setAttribute('tabindex', '0');
      logo.setAttribute('role', 'link');
      let handled = false;
      function openPaypal(){ window.open(PAYPAL_URL, '_blank', 'noopener,noreferrer'); }
      logo.addEventListener('pointerdown', ()=>{ handled=false; });
      logo.addEventListener('pointerup', ()=>{ handled=true; openPaypal(); });
      logo.addEventListener('click', ()=>{ if(!handled) openPaypal(); });
      logo.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); openPaypal(); } });
    })();
  </script>

  <style>
    body, body * { user-select: none !important; -webkit-user-select:none !important; -moz-user-select:none !important; -ms-user-select:none !important; }
    .post-name, input, textarea, .post-text, .post-desc { user-select: text !important; -webkit-user-select:text !important; }
  </style>

</body>
</html>
